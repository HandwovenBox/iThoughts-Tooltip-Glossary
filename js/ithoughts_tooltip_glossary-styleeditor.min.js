!function(){$d.ready(function(){function t(t,e,n){var o=!1,a=0
do{var r=e.find(t)
r.length>0?(o=!0,e=r):(e=$(e.parent()),a++)}while(n>=a&&!o)
return o?e:!1}function e(){for(var t={},e=document.styleSheets.length,n=0;e>n;n++)try{var o,a=document.styleSheets[n].cssRules
o="undefined"!=typeof a&&a?a.length:0
for(var r=0;o>r;r++){var i=a[r]
i instanceof CSSFontFaceRule&&(t[i.style.getPropertyValue("font-family")]||(t[i.style.getPropertyValue("font-family")]={}),t[i.style.getPropertyValue("font-family")][i.style.getPropertyValue("font-style")]||(t[i.style.getPropertyValue("font-family")][i.style.getPropertyValue("font-style")]=[]),t[i.style.getPropertyValue("font-family")][i.style.getPropertyValue("font-style")].push(i.style.getPropertyValue("font-weight")))}}catch(l){console.error("Error while retrieving font list",l,n)
continue}var c={}
for(var s in t){var d=t[s]
for(var u in d){var p=d[u]
if(""!=s){var f=function(){for(var t=[],e=0,n=p.length;n>e;e++)-1===t.indexOf(p[e])&&t.push(p[e])
return t}().filter(function(t){return""!==t})
if(f.length>0){var h={},g=s.replace(/^['"]?(.+?)['"]?$/,"$1")
h[g]={},h[g][u]=f,c=$.extend(c,h)}}}}console.log("Fonts available:",c)
for(var s in c)$('[name$="_tf"]').append($.parseHTML('<option value="'+encodeURIComponent(s)+'">'+s+"</option>"))
$('[name$="_tf"] option[value=""]').text("Please select...")}$(".simpleajaxform")[0].simple_ajax_callback=function(t){if(console.log("Callback",t),t.valid){var e=$("#ithoughts_tt_gl-custom_theme")
0==e.length&&(e=$($.parseHTML('<style id="ithoughts_tt_gl-custom_theme"></style>')),$("body").append(e)),e[0].innerHTML=t.css,window.updateStyle(null,t.theme_name)}},console.log($(".simpleajaxform")[0]),window.refloat(),$(".color-field").each(function(t,e){e.setAttribute("name",e.getAttribute("name"))
var n=e.cloneNode(!0)
$(e).parent().append($(n).css("display","none").prop("name",$(n).prop("name")+"_hidden").prop("id",$(n).prop("id")+"_hidden")),Object.defineProperty(e,"value",{get:function(){return this.getAttribute("value")},set:function(t){if(n.value=t,this.setAttribute("value",t),"createEvent"in document){var o=document.createEvent("HTMLEvents")
o.initEvent("change",!1,!0),e.dispatchEvent(o)}else{var o=document.createEventObject()
e.fireEvent("onchange",o)}}})}).wpColorPicker()
var n=2
$("select.modeswitcher").each(function(e,o){$(o).bind("keydown click change",function(e){for(var o=$(this),a=$(this).val(),r=[],i=$(this).find("option"),l=0;l<i.length;l++)r.push(i[l].getAttribute("value"))
r=r.filter(function(t){return t!=a})
for(var c=r.length,l=0;c>l;l++){var s=t('[data-switcher-mode="'+r[l]+'"]',o,n)
s&&s.css("display","none")}var d=t('[data-switcher-mode="'+a+'"]',o,n)
return d===!1?void console.warn("Can't find switcher-mode "+a+'" at max-depth '+n+" for element",this):void d.css("display","block")}).change()}),$("#customizing-form .postbox").each(function(t,e){$(e).find(".hndle").click(function(){$(e).toggleClass("closed")})})
var o=[],a=$($.parseHTML('<div id="ithoughts_tt_gl_stylesheets"></div>'))
$("body").append(a),$('link[rel="stylesheet"]').each(function(t,n){var r=$(n).clone()
r[0].setAttribute("crossorigin","anonymous")
var i=r[0].getAttribute("href")+"#"
o.push(i),r[0].setAttribute("href",i),a.append(r),r[0].onload=function(t){o.splice(o.indexOf(t.target.getAttribute("href")),1),0==o.length&&e()}}),$("input[pattern]").on("change keyup click",function(t){t.target.value.match(new RegExp(t.target.getAttribute("pattern")))?$(t.target).qtip("api")&&$(t.target).qtip("api").destroy():(t.target.removeAttribute("title"),$(t.target).qtip("api")?$(t.target).qtip("api").set("content.text",t.target.getAttribute("data-pattern-infos")):$(t.target).qtip({content:{text:t.target.getAttribute("data-pattern-infos"),title:{text:"Invalid format"}},hide:"focusout",position:{at:"center right",my:"bottom left",viewport:$("body"),container:$("#ithoughts_tooltip_glossary-tipsContainer")},show:{ready:!0,event:"focusin"}}))}),$("[data-child-form-controled]").each(function(t,e){var n=e.getAttribute("data-child-form-controled")
$(e).bind("click change",function(){var t=e.checked
$('[data-child-form="'+n+'-true"]').prop("disabled",!t),$('[data-child-form="'+n+'-false"]').prop("disabled",t)}).change()}),$("#copyclip").bind("click",function(t){t.preventDefault(),form.outputcss.select()
var e=$("#copyclipres")
document.queryCommandSupported("copy")&&document.execCommand("copy")?e.text(e[0].getAttribute("data-text-success")).removeClass().addClass("updated"):e.text(e[0].getAttribute("data-text-error")).removeClass().addClass("error"),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()})
var r=$('[name="themename"]').val()
""!=r&&r&&(console.log("Setting theme",r),window.updateStyle(null,r))})}()
