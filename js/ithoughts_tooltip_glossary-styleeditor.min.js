!function(){$d.ready(function(){function e(e){e.setTheme("ace/theme/monokai"),e.getSession().setMode("ace/mode/less"),e.getSession().setUseWrapMode(!0),console.log(e.getSession().getState()),e.setShowPrintMargin(!1),e.setOptions({tooltipFollowsMouse:!0,displayIndentGuides:!0,fontSize:"20px",cursorStyle:"wide",highlightSelectedWord:!0,highlightActiveLine:!0,behavioursEnabled:!0,showFoldWidgets:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0})}function t(e,t,n){var o=!1,a=0
do{var i=t.find(e)
i.length>0?(o=!0,t=i):(t=$(t.parent()),a++)}while(n>=a&&!o)
return o?t:!1}function n(){for(var e={},t=document.styleSheets.length,n=0;t>n;n++)try{var o,a=document.styleSheets[n].cssRules
o="undefined"!=typeof a&&a?a.length:0
for(var i=0;o>i;i++){var r=a[i]
r instanceof CSSFontFaceRule&&(e[r.style.getPropertyValue("font-family")]||(e[r.style.getPropertyValue("font-family")]={}),e[r.style.getPropertyValue("font-family")][r.style.getPropertyValue("font-style")]||(e[r.style.getPropertyValue("font-family")][r.style.getPropertyValue("font-style")]=[]),e[r.style.getPropertyValue("font-family")][r.style.getPropertyValue("font-style")].push(r.style.getPropertyValue("font-weight")))}}catch(l){console.error("Error while retrieving font list",l,n)
continue}var s={}
for(var c in e){var d=e[c]
for(var u in d){var p=d[u]
if(""!=c){var g=function(){for(var e=[],t=0,n=p.length;n>t;t++)-1===e.indexOf(p[t])&&e.push(p[t])
return e}().filter(function(e){return""!==e})
if(g.length>0){var f={},h=c.replace(/^['"]?(.+?)['"]?$/,"$1")
f[h]={},f[h][u]=g,s=$.extend(s,f)}}}}console.log("Fonts available:",s)
for(var c in s)$('[name$="_tf"]').append($.parseHTML('<option value="'+encodeURIComponent(c)+'">'+c+"</option>"))
$('[name$="_tf"] option[value=""]').text("Please select...")}ace.require("ace/ext/language_tools")
$(".simpleajaxform")[0].simple_ajax_callback=function(e){if(console.log("Callback",e),e.valid){var t=$("#ithoughts_tt_gl-custom_theme")
0==t.length&&(t=$($.parseHTML('<style id="ithoughts_tt_gl-custom_theme"></style>')),$("body").append(t)),t[0].innerHTML=e.css,window.updateStyle(null,e.theme_name)}},console.log($(".simpleajaxform")[0]),["g_custom","t_custom","c_custom"].map(function(t){var n=ace.edit(t)
e(n)
var o=$('[data-ace-id="'+t+'"]')
n.getSession().on("change",function(){o.val(n.getSession().getValue())})}),window.refloat(),$(".color-field").each(function(e,t){t.setAttribute("name",t.getAttribute("name"))
var n=t.cloneNode(!0)
$(t).parent().append($(n).css("display","none").prop("name",$(n).prop("name")+"_hidden").prop("id",$(n).prop("id")+"_hidden")),Object.defineProperty(t,"value",{get:function(){return this.getAttribute("value")},set:function(e){if(n.value=e,this.setAttribute("value",e),"createEvent"in document){var o=document.createEvent("HTMLEvents")
o.initEvent("change",!1,!0),t.dispatchEvent(o)}else{var o=document.createEventObject()
t.fireEvent("onchange",o)}}})}).wpColorPicker()
var o=2
$("select.modeswitcher").each(function(e,n){$(n).bind("keydown click change",function(e){for(var n=$(this),a=$(this).val(),i=[],r=$(this).find("option"),l=0;l<r.length;l++)i.push(r[l].getAttribute("value"))
i=i.filter(function(e){return e!=a})
for(var s=i.length,l=0;s>l;l++){var c=t('[data-switcher-mode="'+i[l]+'"]',n,o)
c&&c.css("display","none")}var d=t('[data-switcher-mode="'+a+'"]',n,o)
return d===!1?void console.warn("Can't find switcher-mode "+a+'" at max-depth '+o+" for element",this):void d.css("display","block")}).change()}),$("#customizing-form .postbox").each(function(e,t){$(t).find(".hndle").click(function(){$(t).toggleClass("closed")})})
var a=[],i=$($.parseHTML('<div id="ithoughts_tt_gl_stylesheets"></div>'))
$("body").append(i),$('link[rel="stylesheet"]').each(function(e,t){var o=$(t).clone()
o[0].setAttribute("crossorigin","anonymous")
var r=o[0].getAttribute("href")+"#"
a.push(r),o[0].setAttribute("href",r),i.append(o),o[0].onload=function(e){a.splice(a.indexOf(e.target.getAttribute("href")),1),0==a.length&&n()}}),$("input[pattern]").on("change keyup click",function(e){e.target.value.match(new RegExp(e.target.getAttribute("pattern")))?$(e.target).qtip("api")&&$(e.target).qtip("api").destroy():(e.target.removeAttribute("title"),$(e.target).qtip("api")?$(e.target).qtip("api").set("content.text",e.target.getAttribute("data-pattern-infos")):$(e.target).qtip({content:{text:e.target.getAttribute("data-pattern-infos"),title:{text:"Invalid format"}},hide:"focusout",position:{at:"center right",my:"bottom left",viewport:$("body"),container:$("#ithoughts_tooltip_glossary-tipsContainer")},show:{ready:!0,event:"focusin"}}))}),$("[data-child-form-controled]").each(function(e,t){var n=t.getAttribute("data-child-form-controled")
$(t).bind("click change",function(){var e=t.checked
$('[data-child-form="'+n+'-true"]').prop("disabled",!e),$('[data-child-form="'+n+'-false"]').prop("disabled",e)}).change()}),$("#copyclip").bind("click",function(e){e.preventDefault(),form.outputcss.select()
var t=$("#copyclipres")
document.queryCommandSupported("copy")&&document.execCommand("copy")?t.text(t[0].getAttribute("data-text-success")).removeClass().addClass("updated"):t.text(t[0].getAttribute("data-text-error")).removeClass().addClass("error"),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()})
var r=$('[name="themename"]').val()
""!=r&&r&&(console.log("Setting theme",r),window.updateStyle(null,r))})}()
