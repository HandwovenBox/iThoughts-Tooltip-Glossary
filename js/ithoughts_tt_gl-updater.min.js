!function(){function t(o){jQuery.post(ithoughts_tt_gl.admin_ajax,{action:"ithoughts_tt_gl_update",data:{versions:ithoughts_tt_gl_updater,progression:o,maxAdvandement:r.max}},function(o){e.value=o.data.progression,s.innerHTML=e.value+"/"+r.max+" (<em>"+(parseInt(e.value/r.max*100)+"").slice(0,3)+"%</em>)",o.data.progression<r.max?t(o.data.progression):(ithoughts_tt_gl_updater.from=r.targetversion,jQuery.post(ithoughts_tt_gl.admin_ajax,{action:"ithoughts_tt_gl_update_done",data:{newversion:ithoughts_tt_gl_updater.from}},function(t){t.success&&a(ithoughts_tt_gl_updater)}))})}function a(a){console.log("Init step update",a),jQuery.post(ithoughts_tt_gl.admin_ajax,{action:"ithoughts_tt_gl_update",data:{versions:a,progression:-1,maxAdvandement:-1}},function(a){var o=jQuery("#ithoughts_tt_gl_updater")
a.data.Ended?o.append(jQuery.parseHTML('<article data-version="ended"><h3>'+a.data.title+'</h3><p class="updatedescription">'+a.data.text+"</p>")):(o.append(jQuery.parseHTML('<article data-version="'+a.data.targetversion+'"><h3>V'+a.data.targetversion+'</h3><p class="updatedescription">'+a.data.text+'</p><progress class="updateprogress" min="0" max="'+a.data.max+'" value="0"></progress><span class="updateprogresstext">0/'+a.data.max+" (<em>0%</em>)</span>")),r=a.data,e=qs('[data-version="'+a.data.targetversion+'"] .updateprogress'),s=qs('[data-version="'+a.data.targetversion+'"] .updateprogresstext'),t(0))})}var e,s,r
a(ithoughts_tt_gl_updater)}()
