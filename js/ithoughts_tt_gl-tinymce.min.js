/*! ithoughts-tooltip-glossary build on 2017-04-22 01:17:55 for v2.7.0 */
/**
 * @file TinyMCE plugin scripts
 *
 * @author Gerkin
 * @copyright 2016 GerkinDevelopment
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.fr.html GPLv2
 * @package ithoughts-tooltip-glossary
 *
 * @version 2.7.0
 */
!function(a){"use strict";function b(a,b){return function(){var c=this;b.on(a,function(a){c.active(a.active)})}}var c=a.$,d=ithoughts_tt_gl_editor,e="ithoughts_tt_gl_tinymce",f="ithoughts-tooltip-glossary",g=["ithoughts-tooltip-glossary-term","ithoughts-tooltip-glossary-tooltip","ithoughts-tooltip-glossary-mediatip"],h=g.map(function(a){return'[data-type="'+a+'"]'}).join(",");tinymce.PluginManager.add(e,function(a,g){function i(){var b=a.selection.getNode(),d=c(b),e=d.closest(h),f=e.get(0);if(f){var g=f.innerHTML;e.replaceWith(g)}}function j(){var b=a.selection,d={DOM:c(b.getNode()).closest(h).toArray()};return d.html=b.getContent({format:"html"}),d.start=b.getStart(),d.end=b.getEnd(),d}function k(b,c){"load"===c?a.selection.select(a.selection.getStart()):c.indexOf("extend")>-1&&d.error('Unhandled mode "extend" during writing of new tooltip shortcode'),a.insertContent(b)}a.contentCSS.push(g+"/../css/ithoughts_tt_gl-admin.css?v=2.1.7"),a.on("BeforeSetcontent",function(a){a.content=d.replaceShortcodes(a.content)}).on("GetContent",function(a){a.content=d.restoreShortcodes(a.content)}).on("NodeChange",function(b){var d=b.element;c(d).closest(h).length>0?(a.fire("glossaryterm",{active:!0}),a.fire("glossaryterm-d",{active:!0})):(a.fire("glossaryterm",{active:!1}),a.fire("glossaryterm-d",{active:!1})),-1!==[f+"-term_list",f+"-atoz"].indexOf(d.getAttribute("data-type"))?a.fire("glossarylist",{active:!0}):a.fire("glossarylist",{active:!1})}),a.addButton("glossaryterm",{title:a.getLang(e+".add_tooltip"),image:g+"/icon/glossaryterm.png",onPostRender:b("glossaryterm",a),onclick:function(){d.editorForms.tip(j(),k)}}),a.addButton("glossaryterm-d",{title:a.getLang(e+".remove_tooltip"),image:g+"/icon/glossaryterm-d.png",onPostRender:b("glossaryterm-d",a),onclick:i}),a.addButton("glossarylist",{title:a.getLang(e+".add_index"),image:g+"/icon/glossaryindex.png",onPostRender:b("glossarylist",a),onclick:function(){var b={selection:a.selection};b.start=b.selection.getStart(),b.end=b.selection.getEnd(),b.DOM=c.parseHTML(b.selection),d.editorForms.list(j(),k)}})})}(Ithoughts.v4);/**/