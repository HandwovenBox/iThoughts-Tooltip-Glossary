/*! ithoughts-tooltip-glossary build on 2017-04-22 09:35:44 for v2.7.0 */
/**
 * @file TinyMCE plugin scripts
 *
 * @author Gerkin
 * @copyright 2016 GerkinDevelopment
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.fr.html GPLv2
 * @package ithoughts-tooltip-glossary
 *
 * @version 2.7.0
 */
!function(a){"use strict";function b(a,b){return function(){var c=this;b.on(a,function(a){c.active(a.active)})}}var c=a.$,d=ithoughts_tt_gl,e=ithoughts_tt_gl_editor,f="ithoughts_tt_gl_tinymce",g="ithoughts-tooltip-glossary",h=(d.stripQuotes,a.isNA,["ithoughts-tooltip-glossary-term","ithoughts-tooltip-glossary-tooltip","ithoughts-tooltip-glossary-mediatip"]),i=h.map(function(a){return'[data-type="'+a+'"]'}).join(",");tinymce.PluginManager.add(f,function(a,d){function h(b){var d=a.selection.getNode(),e=c(d),f=e.closest(i),g=f.get(0);if(g){var h=g.innerHTML;f.replaceWith(h)}}function j(){var b=a.selection,d={DOM:c(b.getNode()).closest(i).toArray()};return d.html=b.getContent({format:"html"}),d.start=b.getStart(),d.end=b.getEnd(),d}function k(b,c){"load"===c?a.selection.select(a.selection.getStart()):c.indexOf("extend")>-1&&e.error('Unhandled mode "extend" during writing of new tooltip shortcode'),a.insertContent(b)}a.contentCSS.push(d+"/../css/ithoughts_tt_gl-admin.css?v=2.1.7"),a.on("BeforeSetcontent",function(a){a.content=e.replaceShortcodes(a.content)}).on("GetContent",function(a){a.content=e.restoreShortcodes(a.content)}).on("NodeChange",function(b){var d=b.element;c(d).closest(i).length>0?(a.fire("glossaryterm",{active:!0}),a.fire("glossaryterm-d",{active:!0})):(a.fire("glossaryterm",{active:!1}),a.fire("glossaryterm-d",{active:!1})),-1!==[g+"-term_list",g+"-atoz"].indexOf(d.getAttribute("data-type"))?a.fire("glossarylist",{active:!0}):a.fire("glossarylist",{active:!1})}),a.addButton("glossaryterm",{title:a.getLang(f+".add_tooltip"),image:d+"/icon/glossaryterm.png",onPostRender:b("glossaryterm",a),onclick:function(){e.editorForms.tip(j(),k)}}),a.addButton("glossaryterm-d",{title:a.getLang(f+".remove_tooltip"),image:d+"/icon/glossaryterm-d.png",onPostRender:b("glossaryterm-d",a),onclick:h});a.addButton("glossarylist",{title:a.getLang(f+".add_index"),image:d+"/icon/glossaryindex.png",onPostRender:b("glossarylist",a),onclick:function(){var b={selection:a.selection};b.start=b.selection.getStart(),b.end=b.selection.getEnd(),b.DOM=c.parseHTML(b.selection),e.editorForms.list(j(),k)}})})}(Ithoughts.v4);/**/