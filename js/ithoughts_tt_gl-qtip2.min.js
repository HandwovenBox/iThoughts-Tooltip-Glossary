/*! ithoughts-tooltip-glossary build on 2017-04-22 09:35:44 for v2.7.0 */
/**
 * @file Interface between plugin formatted data and qTip API
 *
 * @author Gerkin
 * @copyright 2016 GerkinDevelopment
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPLv3
 * @package ithoughts-tooltip-glossary
 *
 * @version 2.7.0
 */
ithoughts_tt_gl=ithoughts_tt_gl||{},function(a){"use strict";function b(a){var b=f(document.createElement("div"));f(b).append(f(a));var b=b.html();return b}function c(c){for(var d=g.height(),e=g.width(),h=0,i=[[512,288],[256,144]],j=i.length;h<j&&!(e>i[h][0]&&d>i[h][1]);h++);h=Math.min(i.length,Math.max(0,h));var k=i[h];if(void 0===c&&void 0!==k)f(".ithoughts_tt_gl-video").prop({width:k[0],height:k[1]}),f(".ithoughts_tt_gl-video_tip").each(function(){var a=f(this).qtip("api"),b=a.disabled;a.enable(),a.reposition(),a.disable(b)}).css({width:k[0],height:k[1]});else if(!a.isNA(c))return c.prop({width:k[0],height:k[1]}).addClass("ithoughts_tt_gl-video"),{dims:{width:k[0],height:k[1]},text:b(c)}}var d,e,f=a.$,g=a.$w,h=a.$d,i=ithoughts_tt_gl,j=a.isNA,k=f.extend,l="ithoughts_tooltip_glossary";a.initLoggers(i,"iThoughts Tooltip Glossary",i.verbosity),i.stripQuotes=function(a,b){return"string"!=typeof a?"":b?a.replace(/"/g,"&aquot;").replace(/\n/g,"<br/>"):a.replace(/<br\/>/g,"\n").replace(/&aquot;/g,'"')},i.doInitTooltips=function(){j(d)&&0==(d=f("#"+l+"-tipsContainer")).length&&(d=f(f.parseHTML('<div id="'+l+'-tipsContainer"></div>')),f(document.body).append(d));var b={start:a.isIos?"mousedown":"touchstart",end:a.isIos?"mouseup":"touchend"};a.isIos&&f("body").css({cursor:"pointer"}),f("span[class^="+l+"-]").each(function(){var e=f(this),g=e.data("qtipstyle")||i.qtipstyle,h=e.data("termcontent")||i.termcontent,j=e.data("qtipshadown")||i.qtipshadown,m=e.data("qtiprounded")||i.qtiprounded,n=e.data("qtiptrigger")||i.qtiptrigger,o=e.data("animation_in")||i.anims.in,p=e.data("animation_out")||i.anims.out,q=e.data("animation_time")||i.anims.duration,r=[];j="true"===j||"1"===j,m="true"===m||"1"===m,"click"==n?e.children("a").click(function(a){1!=e.touch&&(a.preventDefault(),e.touch=1)}).mouseleave(function(){e.touch=0}):"responsive"==n&&(e.touch=a.baseTouch,f("body").bind("click touch",function(a){0==f(a.target).closest(e).length&&(e.data("expanded",!1),e.triggerHandler("responsiveout"))}),e.children("a").click(function(a){e.data("expanded")||0==e.touch||(e.data("expanded",!0),e.triggerHandler("responsive"),a.preventDefault())}).bind(b.start,function(a){e.touch=1}).bind(b.end,function(a){e.touch=2})),e.bind("mouseover focus",function(a){e.triggerHandler("responsive")}).bind("mouseleave focusout",function(a){e.triggerHandler("responsiveout")});var s;s=e.data("qtipstyle")?"qtip-"+e.data("qtipstyle")+(j?" qtip-shadow":"")+(m?" qtip-rounded":"")+" ":e.data("tooltip-classes")?e.data("tooltip-classes"):"qtip-"+g+(j?" qtip-shadow":"")+(m?" qtip-rounded":"")+" ";var t,u,v={};if(e.hasClass(l+"-glossary"))if(i.info("Do init a GLOSSARYTIP"),e.data("termid")&&"off"!=h){var w={action:"ithoughts_tt_gl_get_term_details",content:h,termid:e.data().termid};"true"==e.data("disable_auto_translation")&&(w.disable_auto_translation=!0),u={content:{text:i.lang.qtip.pleasewait_ajaxload.content,ajax:{url:i.admin_ajax,type:"POST",data:w,dataType:"json",loading:!1,success:function(a,b){a.success?(this.set("content.title",a.data.title),this.set("content.text",a.data.content)):this.set("content.text","Error")}},title:{text:i.lang.qtip.pleasewait_ajaxload.title}},style:{classes:s+l+"-glossary"}}}else e.data("term-content")&&e.data("term-title")&&(u={content:{title:{text:e.data("term-title")},text:e.data("term-content")},style:{classes:s+l+"-glossary"}});else if(e.hasClass(l+"-tooltip"))i.info("Do init a TOOLTIP"),u={style:{classes:s+l+"-tooltip"},content:{text:i.stripQuotes(e.data("tooltip-content"),!1),title:{text:e.text()}}};else{if(!e.hasClass(l+"-mediatip"))return;if(i.info("Do init a MEDIATIP"),u={style:{classes:s+l+"-mediatip"},position:{adjust:{scroll:!1}},content:{text:"",title:{text:e.text()}},events:{show:function(){e.qtip().reposition()}}},e.data("mediatip-image")){var x={src:e.data("mediatip-image"),alt:e.text()};if(void 0!==i.qtip_filters&&i.qtip_filters&&void 0!==i.qtip_filters.mediatip&&i.qtip_filters.mediatip&&i.qtip_filters.mediatip.length>0)for(var y=0;y<i.qtip_filters.mediatip.length;y++)x=k(x,i.qtip_filters.mediatip[y](e));var z="";for(var A in x)z+=A+'="'+x[A]+'" ';u.content.text="<img "+z+">";var B=e.data("mediatip-caption");B&&(u.content.text+='<div class="ithoughts_tt_gl-caption">'+B.replace(/&aquot;/g,'"')+"</div>")}else if(e.data("mediatip-html")){var C=function(a){if(1==a.length&&("IFRAME"==a[0].nodeName&&a[0].src.match(/youtube|dailymotion/)||"VIDEO"==a[0].nodeName))return c(a)}(f(f.parseHTML(e.data("mediatip-html").replace("&quot;",'"').trim())));r.push(function(a,b){b.elements.title.find("."+l+"_pin_container").click(function(){f(this).toggleClass("pined").hasClass("pined")?b.disable():b.enable()})}),k(!0,u,{content:{text:C.text,title:{text:'<span class="'+l+'_pin_container"><svg viewBox="0 0 26 26" class="'+l+'_pin"><use xlink:href="#icon-pin"></use></svg></span><span class="ithoughts_tt_gl-title_with_pin">'+u.content.title.text+"</span>"}},style:{width:C.dims.width}}),t.style.classes+=" ithoughts_tt_gl-force_no_pad ithoughts_tt_gl-video_tip ithoughts_tt_gl-with_pin"}}"true"==e.data("tooltip-autoshow")&&k(!0,v,{show:{ready:!0}}),"true"==e.data("tooltip-nosolo")&&k(!0,v,{show:{solo:!1}}),"true"==e.data("tooltip-nohide")&&k(!0,v,{hide:"someevent",show:{event:"someevent"}}),e.data("tooltip-id")&&k(!0,v,{id:e.data("tooltip-id")}),(e.data("qtip-keep-open")||e.hasClass(l+"-mediatip"))&&k(!0,v,{hide:{fixed:!0,delay:250}}),1==e.data("tooltip-prerender")&&k(!0,v,{prerender:!0}),t={prerender:!1,suppress:!1,position:{at:e.data("position-at")||"top center",my:e.data("position-my")||"bottom center",viewport:f("body"),effect:!1,container:d},show:{event:n,solo:!0,effect:i.animationFunctions.in[o]||i.animationFunctions.in.none},hide:{event:"responsive"==n?"responsiveout":"mouseleave",leave:!1,effect:i.animationFunctions.out[p]||i.animationFunctions.in.none},events:{render:function(a,b){f(this).css({maxWidth:e.data("tooltip-maxwidth")}),f(this).prop("animation_duration",q);for(var c=0,d=r.length;c<d;c++)r[c](a,b);if(i.renderHooks)for(var c=0,d=i.renderHooks.length;c<d;c++)i.renderHooks[c](a,b)}},style:s};var D=k(!0,t,u,v);e.qtip(D),e.find("a[title]").removeAttr("title")})},g.resize(function(){clearTimeout(e),e=setTimeout(c,100)}),h.ready(function(){i.doInitTooltips()}),k(f.easing,{easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c}}),i.animationFunctions=k(!0,i.animationFunctions,{in:{none:function(){f(this).show()},zoomin:function(a){var b=f(this),c=a.elements.tip;b.prop("scale_start",b.prop("scale")||0),b.show().animate({z:1},{progress:function(a,d,e){var g=f.easing.swing(d,a.duration-e,0,1,a.duration),h=b.prop("scale_start")*(1-g),i=1*g,j=h+i;1!=j&&0!=j&&b.prop("scale",j);var k="scale("+j+")",l=c.css(["left","top"]);l=l.left+" "+l.top+" 0",b.css({"-webkit-transform":k,"-moz-transform":k,transform:k,"-ms-transform-origin":l,"-webkit-transform-origin":l,"transform-origin":l})},duration:b.prop("animation_duration"),done:function(a,c){!j(c)&&c||(b.prop("scale",null),b.css({"-webkit-transform":"","-moz-transform":"",transform:"","-ms-transform-origin":"","-webkit-transform-origin":"","transform-origin":""}))}})},appear:function(){var a=f(this);a.css({display:"block",opacity:0}).animate({opacity:1},{easing:"swing",duration:a.prop("animation_duration")})}},out:{none:function(){},unhook:function(){var a=f(this);a.animate({opacity:0,top:"+=50"},{easing:"easeInBack",duration:a.prop("animation_duration")})},flee:function(){var a=f(this);a.animate({opacity:0,left:-100},{easing:"easeInBack",duration:a.prop("animation_duration")})},zoomout:function(a){var b=f(this),c=a.elements.tip;b.prop("scale_start",b.prop("scale")||1),b.animate({z:1},{progress:function(a,d,e){var g=f.easing.swing(d,a.duration-e,0,1,a.duration),h=b.prop("scale_start")*(1-g),i=h+0;1!=i&&0!=i&&b.prop("scale",i);var j="scale("+i+")",k=c.css(["left","top"]);k=k.left+" "+k.top+" 0",b.css({"-webkit-transform":j,"-moz-transform":j,transform:j,"-ms-transform-origin":k,"-webkit-transform-origin":k,"transform-origin":k})},duration:b.prop("animation_duration"),done:function(a,c){!j(c)&&c||(b.prop("scale",null),b.css({"-webkit-transform":"","-moz-transform":"",transform:"","-ms-transform-origin":"","-webkit-transform-origin":"","transform-origin":""}))}})},disappear:function(){var a=f(this);a.animate({opacity:0},{easing:"swing",duration:a.prop("animation_duration")})}}})}(Ithoughts.v4);/**/